"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _asyncOra = require("@electron-forge/async-ora");

var _debug = _interopRequireDefault(require("debug"));

var _fsExtra = _interopRequireDefault(require("fs-extra"));

var _logSymbols = _interopRequireDefault(require("log-symbols"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

const d = (0, _debug.default)('electron-forge:init:directory');

var _default =
/*#__PURE__*/
function () {
  var _ref = _asyncToGenerator(function* (dir) {
    yield (0, _asyncOra.asyncOra)('Initializing Project Directory',
    /*#__PURE__*/
    function () {
      var _ref2 = _asyncToGenerator(function* (initSpinner) {
        d('creating directory:', dir);
        yield _fsExtra.default.mkdirs(dir);
        const files = yield _fsExtra.default.readdir(dir);

        if (files.length !== 0) {
          d('found', files.length, 'files in the directory.  warning the user');
          initSpinner.stop(_logSymbols.default.warning);
          throw `The specified path: "${dir}" is not empty, do you wish to continue?`;
        }
      });

      return function (_x2) {
        return _ref2.apply(this, arguments);
      };
    }());
  });

  return function (_x) {
    return _ref.apply(this, arguments);
  };
}();

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hcGkvaW5pdC1zY3JpcHRzL2luaXQtZGlyZWN0b3J5LnRzIl0sIm5hbWVzIjpbImQiLCJkaXIiLCJpbml0U3Bpbm5lciIsImZzIiwibWtkaXJzIiwiZmlsZXMiLCJyZWFkZGlyIiwibGVuZ3RoIiwic3RvcCIsImxvZ1N5bWJvbHMiLCJ3YXJuaW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFFQSxNQUFNQSxDQUFDLEdBQUcsb0JBQU0sK0JBQU4sQ0FBVjs7Ozs7K0JBRWUsV0FBT0MsR0FBUCxFQUF1QjtBQUNwQyxVQUFNLHdCQUFTLGdDQUFUO0FBQUE7QUFBQTtBQUFBLG9DQUEyQyxXQUFPQyxXQUFQLEVBQXVCO0FBQ3RFRixRQUFBQSxDQUFDLENBQUMscUJBQUQsRUFBd0JDLEdBQXhCLENBQUQ7QUFDQSxjQUFNRSxpQkFBR0MsTUFBSCxDQUFVSCxHQUFWLENBQU47QUFFQSxjQUFNSSxLQUFLLFNBQVNGLGlCQUFHRyxPQUFILENBQVdMLEdBQVgsQ0FBcEI7O0FBQ0EsWUFBSUksS0FBSyxDQUFDRSxNQUFOLEtBQWlCLENBQXJCLEVBQXdCO0FBQ3RCUCxVQUFBQSxDQUFDLENBQUMsT0FBRCxFQUFVSyxLQUFLLENBQUNFLE1BQWhCLEVBQXdCLDJDQUF4QixDQUFEO0FBQ0FMLFVBQUFBLFdBQVcsQ0FBQ00sSUFBWixDQUFpQkMsb0JBQVdDLE9BQTVCO0FBQ0EsZ0JBQU8sd0JBQXVCVCxHQUFJLDBDQUFsQztBQUNEO0FBQ0YsT0FWSzs7QUFBQTtBQUFBO0FBQUE7QUFBQSxRQUFOO0FBV0QsRyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzeW5jT3JhIH0gZnJvbSAnQGVsZWN0cm9uLWZvcmdlL2FzeW5jLW9yYSc7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCBsb2dTeW1ib2xzIGZyb20gJ2xvZy1zeW1ib2xzJztcblxuY29uc3QgZCA9IGRlYnVnKCdlbGVjdHJvbi1mb3JnZTppbml0OmRpcmVjdG9yeScpO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoZGlyOiBzdHJpbmcpID0+IHtcbiAgYXdhaXQgYXN5bmNPcmEoJ0luaXRpYWxpemluZyBQcm9qZWN0IERpcmVjdG9yeScsIGFzeW5jIChpbml0U3Bpbm5lcikgPT4ge1xuICAgIGQoJ2NyZWF0aW5nIGRpcmVjdG9yeTonLCBkaXIpO1xuICAgIGF3YWl0IGZzLm1rZGlycyhkaXIpO1xuXG4gICAgY29uc3QgZmlsZXMgPSBhd2FpdCBmcy5yZWFkZGlyKGRpcik7XG4gICAgaWYgKGZpbGVzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgZCgnZm91bmQnLCBmaWxlcy5sZW5ndGgsICdmaWxlcyBpbiB0aGUgZGlyZWN0b3J5LiAgd2FybmluZyB0aGUgdXNlcicpO1xuICAgICAgaW5pdFNwaW5uZXIuc3RvcChsb2dTeW1ib2xzLndhcm5pbmcpO1xuICAgICAgdGhyb3cgYFRoZSBzcGVjaWZpZWQgcGF0aDogXCIke2Rpcn1cIiBpcyBub3QgZW1wdHksIGRvIHlvdSB3aXNoIHRvIGNvbnRpbnVlP2A7XG4gICAgfVxuICB9KTtcbn07XG4iXX0=